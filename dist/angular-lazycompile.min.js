!function(window){"use strict";angular.module("angular-lazycompile",[]).directive("lazyCompile",["$compile","$timeout",function($compile,$timeout){return{scope:{lazyCompile:"=",lazyDecode:"=",lazyTimeout:"=",lazyTimeoutDur:"=",lazyPlaceholder:"="},replace:!0,link:function(scope,element,attrs){var voidCompile,timeout,rendered=!1,timeoutVal=scope.lazyTimeout,timeoutDur=scope.lazyTimeoutDur||1e3;if(!scope.lazyRan&&1&&scope.lazyPlaceholder){var placeholderContent=angular.element(scope.lazyPlaceholder);element.append(placeholderContent)}var compile=function(value){if(value&&"false"!=value){scope.lazyDecode&&(value=decodeURIComponent(value));var lazyContent=angular.element(value);element.after(lazyContent),$compile(lazyContent)(scope.$parent),setTimeout(function(){scope.$destroy(),scope=null,element.remove(),element=null},0),rendered=!0,voidCompile(),timeout&&$timeout.cancel(timeout)}};voidCompile=scope.$watch("lazyCompile",function(value,oldVal){!rendered&&value&&"false"!==value&&value!==oldVal&&compile(value)}),timeoutVal&&(timeout=$timeout(function(){rendered||compile(timeoutVal)},parseInt(timeoutDur))),scope.lazyRan=!0}}}])}(window);